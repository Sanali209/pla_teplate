# План заполнения шаблона (Blueprint Workflow)

На основе протокола обсуждения архитектуры `_blueprint`, процесс проектирования и планирования приложения представляет собой строгий конвейер (pipeline). Заполнение шаблона происходит сверху вниз (от сырых идей к атомарным задачам и тестам) с использованием интерактивных циклов ревью и обеспечения реверс-пути (Traceability).

Ниже представлен пошаговый план заполнения шаблона для нового проекта:

## Фаза 0: Сбор и загрузка (Inbound)
**Цель:** Собрать исходную информацию без попыток её сразу структурировать.
1. Сохранить все текстовые заметки, транскрипты интервью и брифы от заказчика в `_blueprint/inbound/Briefings/`.
2. Сохранить визуальные материалы (Miro, концепты, черновики) в `_blueprint/inbound/MindMaps/`.
3. Сохранить ссылки на внешнюю документацию и референсы API в `_blueprint/inbound/Knowledge_Raw/`.
4. **Запуск агента (P0_Ingestion):** Агент анализирует сырье и готовит выжимку ключевых бизнес-намерений для следующего шага.

## Фаза 1: Стратегическое целеполагание (Inception)
**Цель:** Сформировать бизнес-фундамент и границы проекта.
1. **Запуск агента (P1_Inception).**
2. **Создание Целей (Goals):** Агент генерирует документы вида `GL-001.md` в папке `docs/Vision_and_Goals/` (на основе `templates/Goal_Tpl.md`).
3. **Составление списка фич:** Формирование высокоуровневых функциональных блоков (`docs/Feature_Map.md`).
4. **Формирование Roadmap:** Заполнение `_blueprint/execution/roadmap.md` основными вехами.
5. **Ревью:** Пользователь утверждает цели. (Включается протокол `S1_Wait_For_Approval`).

## Фаза 2: Снятие неопределенностей (Research & R&D)
**Цель:** Исключить технологические риски до начала проектирования логики.
1. Идентификация сложных/новых фич, помеченных тэгом `research_required: true`.
2. **Запуск агента (P2_Research).**
3. Формирование гипотез и вопросов для исследования (Research Spikes).
4. Проведение экспериментов (POC) и запись вердиктов в `_blueprint/dev_docs/brain/R_D_Archive/RS-xxx.md`.
5. Если вердикт "Успешно" — переход к проектированию логики.

## Фаза 3: Проектирование поведения и логики (Analysis)
**Цель:** Детализировать фичи до конкретных сценариев использования и пользовательских путей.
1. **Запуск агента (P3_Analysis).**
2. **Определение Use Cases:** Для каждой фичи формируются `UC-xxx.md` в `_blueprint/dev_docs/logic/`.
3. **Создание User Flows:** Описание переходов между экранами и состояниями.
4. В метаданных каждого `UC-xxx.md` (согласно `Metadata_Schema.md`) агент прописывает ссылку на родительские сущности (Origin, Parent Goal).

## Фаза 4: Визуализация и глубокое ревью (UML & Critique)
**Цель:** Визуализировать архитектуру и найти логические дыры.
1. **Запуск агента (P3_5_UML_Generator).**
2. Генерация черновиков UML-диаграмм (Sequence, Activity, State, Class) в `_blueprint/dev_docs/architecture/UML_Models/Drafts/`.
3. **Авто-критика агента (R1_Agent_Self_Critic):** Агент сам ищет тупики в своих диаграммах и сохраняет логи в `Review_Logs/`.
4. **Оценка пользователя (R2_User_Critique):** Пользователь проверяет черновики и оставляет фидбек в `_blueprint/inbound/User_Feedback/`.
5. **Внесение правок (R3_Fix):** Исправление UML, после чего они переносятся в `Approved_Models/`.

## Фаза 5: Инженерная синхронизация и Фазинг (Dev Sync)
**Цель:** Подготовить проект к написанию кода и обеспечить отказоустойчивость.
1. Когда все Use Cases и диаграммы перешли в статус `Approved`, запускается **P4_Dev_Sync**.
2. **Проектирование данных:** Создание схем баз данных и спецификаций API в `_blueprint/dev_docs/architecture/Data_Schemas/`.
3. **Фазинг и отказоустойчивость:** Генерация векторов атак и граничных условий (`Fuzzing_Vectors.md`, анализ точек отказа).
4. **Генерация задач (Backlog):** Нарезка сценариев на атомарные задачи (`TSK-xxx.md`) в `_blueprint/execution/backlog/`.
   * *Важно:* В атрибутах задач прописан полный реверс-путь до бизнес-цели (обеспечивая полную прослеживаемость).

## Фаза 6: Накопление опыта (Knowledge Harvesting)
**Цель:** Обучение системы на основе пройденного пути.
1. При завершении спринтов или фазы система запускает протоколы сбора знаний.
2. Анализ удачных решений и выявление `Design_Patterns.md`.
3. Фиксация ошибок и тупиковых веток в `Anti_Patterns.md` внутри `_blueprint/dev_docs/brain/`.
4. Обновление глоссария терминов.

---

### Правила при заполнении:
1. **Обязательное заполнение метаданных:** Каждый созданный файл должен соответствовать стандарту `Metadata_Schema.md` для корректной работы реверс-пути. Никаких файлов-сирот.
2. **Никакой работы в обход статусов:** Нельзя генерировать задачи, пока соответствующий `Use Case` или `UML` не получит статус `Approved`.
3. **Изоляция исполнения:** Вся работа агентов происходит внутри скрытой директории `_blueprint/`, а публичные документы регулярно синхронизируются в пайплайне в корень проекта (папка `docs/`).
